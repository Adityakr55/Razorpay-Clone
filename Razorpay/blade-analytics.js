(()=>{var g="2.5.0";var w=e=>{if(e.parentElement&&w(e.parentElement))return!0;if(!(e instanceof HTMLElement))return!1;if(e.hidden)return!0;let t=getComputedStyle(e);return t.display==="none"||t.visibility==="hidden"||t.opacity==="0"},C=e=>!e||!e.childNodes.length,N=e=>["img","video","audio","source","picture"].includes(e.tagName.toLowerCase()),A=()=>{let e=document.querySelectorAll("body *"),t=[],s=[];e.forEach(n=>{if(w(n)||C(n)||N(n))return;let c=n.closest("svg");if(n.tagName.toLocaleLowerCase()==="svg"&&n.hasAttribute("data-blade-component")){t.push(n),s.push(n);return}c?.getAttribute("data-blade-component")!=="icon"&&(c&&!n.hasAttribute("data-blade-component")||(s.push(n),n.hasAttribute("data-blade-component")&&t.push(n)))});let o=s.length,r=t.length,a=Number((r/o*100).toFixed(2));return o===0&&(a=0),{bladeCoverage:a,totalNodes:o,bladeNodes:r}};function P(e,t){return Math.floor((e.getTime()-t.getTime())/864e5)}var d="blade-analytics-data";function I(e){try{return localStorage.getItem(e)}catch{return null}}function m(e){try{localStorage.removeItem(e)}catch{}}function E(e){try{localStorage.setItem(d,e)}catch{m(d)}}var S=async(e,t)=>{let s="6lpfX5loXnTbBFVo2FbJHpjins0hGaC4",o="Component Coverage";if(t.debug&&console.log(e),!t.skipSendingData)try{await fetch("https://api.segment.io/v1/track",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({properties:e,event:o,writeKey:s,userId:"fecore@test.com"})})}catch(r){console.log(r)}},T=({businessUnit:e,skipSendingData:t=!1,debug:s=!1})=>{let{bladeNodes:o,totalNodes:r,bladeCoverage:a}=A(),n=window.location.pathname,c=window.location.host,f=window.location.search,u=window.innerWidth,v=window.innerHeight,h=u>768?"desktop":"mobile",l=window.location.toString(),p=new Date,y=I(d),i=y?JSON.parse(y):{};i.packageVersion||(i.packageVersion=g,m(d)),i.packageVersion!==g&&m(d);let b=i[l];if(!b){i[l]=p.getTime(),E(JSON.stringify(i)),S({projectDomain:c,path:n,queryParam:f,deviceWidth:u,deviceHeight:v,deviceType:h,fullPageUrl:l,totalComponents:r,bladeComponents:o,nonBladeComponents:r-o,bladeCoverage:a,businessUnit:e},{debug:s,skipSendingData:t});return}P(p,new Date(b))>=14&&(i[l]=p.getTime(),E(JSON.stringify(i)),S({projectDomain:c,path:n,queryParam:f,deviceWidth:u,deviceHeight:v,deviceType:h,fullPageUrl:l,totalComponents:r,bladeComponents:o,nonBladeComponents:r-o,bladeCoverage:a,businessUnit:e},{debug:s,skipSendingData:t}))};function L({businessUnit:e,skipSendingData:t=!1,debug:s=!1}){try{if(window.setTimeout(()=>{try{T({businessUnit:e,skipSendingData:t,debug:s})}catch(r){console.log(r)}},7e3),"navigation"in window){let r=function(a){return a.downloadRequest||a.formData};navigation.addEventListener("navigate",a=>{r(a)||window.setTimeout(()=>{try{T({businessUnit:e,skipSendingData:t,debug:s})}catch(n){console.log(n)}},7e3)})}}catch(o){console.log(o)}}window.initBladeCoverageAnalytics=L;})();
